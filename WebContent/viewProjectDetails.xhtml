<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui">
<h:head>
    
</h:head>
<h:form>
    <p:tree value="#{treeController.projectTree.root}" var="node" dynamic="true" orientation="vertical"
                selectionMode="single" selection="#{treeController.projectTree.singleSelectedTreeNode}">
        <p:treeNode expandedIcon="ui-icon ui-icon-folder-open"
                        collapsedIcon="ui-icon ui-icon-folder-collapsed">
            <h:outputText value="#{node.wpID} #{node.wpName}"/>
        </p:treeNode>
        <p:treeNode type="document" icon="ui-icon ui-icon-document">
            <h:outputText value="#{node}"/>
        </p:treeNode>
        <p:treeNode type="image" icon="ui-icon ui-icon-image">
            <h:outputText value="#{node}"/>
        </p:treeNode>                 
        <p:treeNode type="video" icon="ui-icon ui-icon-video">
            <h:outputText value="#{node}"/>
        </p:treeNode>
        <p:ajax event="select" listener="#{treeManagedBean.onNodeSelect}"></p:ajax>
        <p:ajax event="unselect" listener="#{treeManagedBean.onNodeUnSelect}"></p:ajax>
        <p:ajax event="expand" listener="#{treeManagedBean.onNodeExpand}"></p:ajax>
        <p:ajax event="collapse" listener="#{treeManagedBean.onNodeCollapse}"></p:ajax>                                 
    </p:tree>
    <h:commandButton value="View Work Package Details" actionListener="#{treeController.showWorkPackageDetails()}"/>
    <br />
    <h:commandButton value="Go Back" action="#{treeController.leaveTreePage()}"></h:commandButton>
    <br />
    <h:commandButton value="Create Child Work Package" action="#{treeController.createNewWorkPackage()}" rendered="#{!projectController.showAllPros}"></h:commandButton>
    <br />
    <h:commandButton value="Create New Branch" action="#{treeController.createNewBranch()}" rendered="#{!projectController.showAllPros}"></h:commandButton>
    <br />
    <br />
    <br />
    <h:outputText value="Work Package Name: #{treeController.selectedWP.wpName}" />
    <br />
    <h:outputText value="Work Package ID: #{treeController.selectedWP.wpID}" />
    <br />
    <h:outputText value="Estimated Number of hours: #{treeController.selectedWP.estimatedHours}" />
  	<br />
  	<br />
	<h:dataTable value="#{treeController.assignedEmps}" var="ewp">
		<h:column>
			<f:facet name="header">ID</f:facet>
			<h:outputText value="#{ewp.emp.employeeID}"/>
		</h:column>
		
		<h:column>
			<f:facet name="header">Name</f:facet>
			<h:outputText value="#{ewp.emp.firstName} #{ewp.emp.lastName}"/>
		</h:column>
		
	</h:dataTable>
</h:form>
</html>